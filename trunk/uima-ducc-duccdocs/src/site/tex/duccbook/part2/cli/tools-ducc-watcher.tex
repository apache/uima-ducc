% 
% Licensed to the Apache Software Foundation (ASF) under one
% or more contributor license agreements.  See the NOTICE file
% distributed with this work for additional information
% regarding copyright ownership.  The ASF licenses this file
% to you under the Apache License, Version 2.0 (the
% "License"); you may not use this file except in compliance
% with the License.  You may obtain a copy of the License at
% 
%   http://www.apache.org/licenses/LICENSE-2.0
% 
% Unless required by applicable law or agreed to in writing,
% software distributed under the License is distributed on an
% "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
% KIND, either express or implied.  See the License for the
% specific language governing permissions and limitations
% under the License.
% 
% Create well-known link to this spot for HTML version
\ifpdf
\else
\HCode{<a name='DUCC_WATCHER'></a>}
\fi
    \section{ducc\_watcher}
    \label{sec:cli.tools-ducc-watcher}    

  \paragraph{Description:}
    The watcher tool is used to monitor the status of the various DUCC daemons. 
    It can additionally be used monitor the status of the Job Driver allocation.
   
  \paragraph{Usage:}
    \begin{description}
    \item[Script] \ducchome/bin/ducc\_watcher {\em options}
    \end{description}
    
  \paragraph{Options:}
    \begin{description}
    	\item[$--$help]
          Prints the usage text to the console. 
        \item[$--$agents]
          Prints status of agents to the console (in addition to the head node daemons). 
        \item[$--$debug]          
          Prints internal debugging information, intended for DUCC developers or extended problem determination.      
        \item[$--$email-list]          
          Blank separated list of e-mail address to receive status updates.  
        \item[$--$job-driver-allocation]          
          Check job driver allocation for specified class.     
        \item[$--$mail-host]          
          The host providing the email service, default is {\em localhost}.     
        \item[$--$path]          
          Path to directory where log and state information are written.  
        \item[$--$target host:port]          
          Use specified DUCC Web Server host and port from which to fetch the data comprising current status.                                                                                               
     \end{description}
            
  \paragraph{Notes:}
    This command is meant to monitor DUCC daemons status and report only when there is a change, e.g. from up to down.
  
  \paragraph{crontab:}
  
    Below is a sample {\em crontab} to check the state of DUCC head node daemons as well as
    the JobDriver allocation every 5 minutes, and to send e-mail when there is a status change.
    
    \begin{verbatim}
    
    */5 * * * *  /home/ducc/ducc_runtime/bin/ducc_watcher --target http://uima-ducc-demo.apache.org:42133 --job-driver-allocation JobDriver --email degenaro@apache.org
    
    \end{verbatim}